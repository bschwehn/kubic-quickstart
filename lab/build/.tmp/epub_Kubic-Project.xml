<?xml version="1.0" encoding="UTF-8"?>
<?asciidoc-toc?><?asciidoc-numbered?><book xmlns="http://docbook.org/ns/docbook" xmlns:xl="http://www.w3.org/1999/xlink" version="5.0" xml:lang="en">
  <info>
    <date xmlns="">2019-04-10</date>
    <title>OpenSUSE Kubic</title>
    <subtitle>Installation</subtitle>
    <author>
      <personname>
        <firstname>Jason</firstname>
        <surname>Evans</surname>
      </personname>
      <email>jsevans@opensuse.org</email>
    </author>
    <authorinitials>JE</authorinitials>
    <revhistory>
      <revision>
        <revnumber>1.0</revnumber>
        <date>2019-04-10</date>
        <authorinitials>JE</authorinitials>
      </revision>
    </revhistory>
  </info>
  <preface>
    <title/>
    <para>
      <?asciidoc-pagebreak?>
    </para>
  </preface>
  <chapter xml:id="_documentation_conventions">
    <title>Documentation Conventions</title>
    <formalpara>
      <title>Documentation Conventions</title>
      <para>The following typographical conventions are used in this manual:</para>
    </formalpara>
    <informaltable frame="all" rowsep="1" colsep="1">
      <tgroup cols="3">
        <colspec colname="col_1" colwidth="33.3333*"/>
        <colspec colname="col_2" colwidth="33.3333*"/>
        <colspec colname="col_3" colwidth="33.3334*"/>
        <tbody>
          <row>
            <entry align="left" valign="top">
              <para>Example</para>
            </entry>
            <entry align="left" valign="top">
              <para>AsciiDoc Markup</para>
            </entry>
            <entry align="left" valign="top">
              <para>Use</para>
            </entry>
          </row>
          <row>
            <entry align="left" valign="top">
              <para>
                <emphasis role="strong">Bold</emphasis>
              </para>
            </entry>
            <entry align="left" valign="top">
              <para>**</para>
            </entry>
            <entry align="left" valign="top">
              <para>Represents things you should pay attention to or buttons you click, text or options that you should click/select/type in a GUI.</para>
            </entry>
          </row>
          <row>
            <entry align="left" valign="top">
              <para>
                <emphasis role="strong">
                  <emphasis>Bold Italics</emphasis>
                </emphasis>
              </para>
            </entry>
            <entry align="left" valign="top">
              <para>* __ *</para>
            </entry>
            <entry align="left" valign="top">
              <para>Represents the name of a Task or in the context of what is seen on the screen, the screen name, a tab name, column
name, field name, etc.</para>
            </entry>
          </row>
          <row>
            <entry align="left" valign="top">
              <para>Option &gt; Option &gt; Option</para>
            </entry>
            <entry align="left" valign="top"/>
            <entry align="left" valign="top">
              <para>Represents a chain of items selected from a menu.</para>
            </entry>
          </row>
          <row>
            <entry align="left" valign="top">
              <para>
                <emphasis role="strong">
                  <emphasis>BOLD_UPPERCASE_ITALICS</emphasis>
                </emphasis>
              </para>
            </entry>
            <entry align="left" valign="top">
              <para>* _ ALL_CAPS _ *</para>
            </entry>
            <entry align="left" valign="top">
              <para>Represents an “exercise variable” that you replace with another value.</para>
            </entry>
          </row>
          <row>
            <entry align="left" valign="top">
              <para>
                <emphasis role="strong">
                  <literal>bold monospace</literal>
                </emphasis>
              </para>
            </entry>
            <entry align="left" valign="top">
              <para>` * * `</para>
            </entry>
            <entry align="left" valign="top">
              <para>Represents text displayed in a terminal or entered in a file.</para>
            </entry>
          </row>
          <row>
            <entry align="left" valign="top">
              <para>monospace</para>
            </entry>
            <entry align="left" valign="top"/>
            <entry align="left" valign="top">
              <para>Represents commands entered at the command line.</para>
            </entry>
          </row>
          <row>
            <entry align="left" valign="top">
              <para>
                <literal>
                  <emphasis>Italics Monospace</emphasis>
                </literal>
              </para>
            </entry>
            <entry align="left" valign="top">
              <para>` _ _ `</para>
            </entry>
            <entry align="left" valign="top">
              <para>Represents a file name.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <?asciidoc-pagebreak?>
    </para>
  </chapter>
  <chapter xml:id="_section_1_setup_the_clone_master">
    <title>Section 1: Setup the Clone Master</title>
    <note>
      <para>This tutorial was written using Virtualbox 6.0. It contains step by step instructions for the installation process. However it is assumed that the user knows how to install and use Virtualbox on the operating system of their choice.</para>
    </note>
    <informaltable frame="all" rowsep="1" colsep="1">
      <tgroup cols="1">
        <colspec colname="col_1" colwidth="100*"/>
        <tbody>
          <row>
            <entry align="left" valign="top">
              <para role="lead">Description:</para>
              <para>In this section you will set up a Kubic Clone Master which will make it easier to create new nodes.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <section xml:id="_task_1_download_the_installation_media">
      <title>Task 1: Download the installation media</title>
      <orderedlist numeration="arabic">
        <listitem>
          <para>Go to the following url and download the current version of the Kubic url:   <link xl:href="http://download.opensuse.org/tumbleweed/iso/openSUSE-Tumbleweed-Kubic-DVD-x86_64-Current.iso.mirrorlist">http://download.opensuse.org/tumbleweed/iso/openSUSE-Tumbleweed-Kubic-DVD-x86_64-Current.iso.mirrorlist</link></para>
        </listitem>
      </orderedlist>
    </section>
    <section xml:id="_task_2_set_up_nat_network">
      <title>Task 2: Set up NAT Network</title>
      <orderedlist numeration="arabic">
        <listitem>
          <para>Open VirtualBox and Click on File and then Preferences:</para>
        </listitem>
        <listitem>
          <para>Click on the Network Icon</para>
        </listitem>
        <listitem>
          <para>Click on the first icon on the right that Adds new NAT network</para>
        </listitem>
        <listitem>
          <para>Click on the third icon on the right that Edits selected NAT network
The Network CIDR should be:<?asciidoc-br?><literal><emphasis role="strong"><phrase role="green">10.0.2.0/24</phrase></emphasis></literal><?asciidoc-br?>
Leave the rest of the settings as their default values<?asciidoc-br?>
Click OK to close this screen</para>
        </listitem>
        <listitem>
          <para>Click OK to close the preferences screen</para>
        </listitem>
      </orderedlist>
    </section>
    <section xml:id="_task_3_set_up_a_new_vm">
      <title>Task 3: Set up a new VM</title>
      <orderedlist numeration="arabic">
        <listitem>
          <para>Open VirtualBox and Click on the New icon:</para>
        </listitem>
        <listitem>
          <para>In the Name field, enter a name:<?asciidoc-br?><emphasis role="strong"><phrase role="gray">Kubic-CloneMaster</phrase></emphasis></para>
        </listitem>
        <listitem>
          <para>In the Version field, choose <emphasis role="strong">OpenSUSE 64-bit</emphasis><?asciidoc-br?>
Click Next</para>
        </listitem>
        <listitem>
          <para>Allow for <emphasis role="strong">2048MB RAM</emphasis><?asciidoc-br?>
Click Next</para>
        </listitem>
        <listitem>
          <para>Choose <emphasis role="strong">Create a virtual hard disk now</emphasis><?asciidoc-br?>
Click Next</para>
        </listitem>
        <listitem>
          <para>Choose <emphasis role="strong">VDI (Virtual Disk Image)</emphasis><?asciidoc-br?>
Click Next</para>
        </listitem>
        <listitem>
          <para>Choose <emphasis role="strong">Dynamically allocated</emphasis><?asciidoc-br?>
Click Next</para>
        </listitem>
        <listitem>
          <para>Allow for <emphasis role="strong">30GB</emphasis><?asciidoc-br?>
Click <emphasis role="strong"><phrase role="gray">Create</phrase></emphasis></para>
        </listitem>
        <listitem>
          <para>Click on the Settings icon on the right</para>
        </listitem>
        <listitem>
          <para>Go to the Network icon</para>
        </listitem>
        <listitem>
          <para>Change Attached to</para>
        </listitem>
      </orderedlist>
      <para>
        <emphasis role="strong">
          <phrase role="gray">NAT Network</phrase>
        </emphasis>
        <?asciidoc-br?>
        <emphasis role="strong">
          <phrase role="gray">Name:</phrase>
        </emphasis>
        <emphasis role="strong">NatNetwork</emphasis>
      </para>
      <orderedlist numeration="arabic">
        <listitem>
          <para>Go to the System icon and click on the Processor tab</para>
        </listitem>
        <listitem>
          <para>Change the number of processors to <emphasis role="strong">2</emphasis></para>
        </listitem>
        <listitem>
          <para>Click OK</para>
        </listitem>
      </orderedlist>
    </section>
    <section xml:id="_task_4_start_installation">
      <title>Task 4: Start Installation</title>
      <orderedlist numeration="arabic">
        <listitem>
          <para>On the main Virtualbox screen, choose <emphasis role="strong">Kubic-CloneMaster</emphasis> and click on the Start icon<?asciidoc-br?>
You will be prompted to Select a start-up disk</para>
        </listitem>
        <listitem>
          <para>Click on the folder icon:<?asciidoc-br?>
Choose the current iso file that you downloaded in Task 1</para>
        </listitem>
        <listitem>
          <para>Click <emphasis role="strong"><phrase role="gray">start</phrase></emphasis></para>
        </listitem>
        <listitem>
          <para>When the virtual machine boots, choose the installation option.</para>
        </listitem>
        <listitem>
          <para>On the license screen, click next if you agree</para>
        </listitem>
        <listitem>
          <para>Choose <emphasis role="strong"><phrase role="gray">kubeadm Node</phrase></emphasis><?asciidoc-br?>
Click Next</para>
        </listitem>
        <listitem>
          <para>Enter an NTP server local to you or use the default one that is provided<?asciidoc-br?>
Click Next</para>
          <note>
            <para>Go to <link xl:href="http://ntp.org">http://ntp.org</link> for more information.</para>
          </note>
        </listitem>
        <listitem>
          <para>Enter a root password and then confirm it<?asciidoc-br?>
Click Next</para>
        </listitem>
        <listitem>
          <para>Click <emphasis role="strong"><phrase role="gray">Install</phrase></emphasis></para>
        </listitem>
      </orderedlist>
    </section>
    <section xml:id="_task_5_post_installation_setup">
      <title>Task 5: Post-Installation setup</title>
      <orderedlist numeration="arabic">
        <listitem>
          <para>After the installation has finished, the VM will reboot. Choose <emphasis role="strong">Boot from Hard Disk</emphasis></para>
        </listitem>
        <listitem>
          <para>Choose the first option: <emphasis role="strong">openSUSE Tumbleweed Kubic</emphasis></para>
        </listitem>
        <listitem>
          <para>Log into the command line:</para>
        </listitem>
      </orderedlist>
      <para>
        <emphasis role="strong">
          <phrase role="gray">Userid:</phrase>
        </emphasis>
        <emphasis role="strong">root</emphasis>
        <?asciidoc-br?>
        <emphasis role="strong">
          <phrase role="gray">Password:</phrase>
        </emphasis>
        <emphasis role="strong">[your root password]</emphasis>
      </para>
      <orderedlist numeration="arabic">
        <listitem>
          <para>Eject the installation media:<?asciidoc-br?><literal><emphasis role="strong"><phrase role="blue">eject /dev/sr0</phrase></emphasis></literal></para>
        </listitem>
        <listitem>
          <para>Install Yast for easier network configuration:<?asciidoc-br?><literal><emphasis role="strong"><phrase role="blue">transactional-update pkg install yast2-network</phrase></emphasis></literal></para>
        </listitem>
        <listitem>
          <para>Reboot your vm:<?asciidoc-br?><literal><emphasis role="strong"><phrase role="blue">reboot</phrase></emphasis></literal></para>
        </listitem>
        <listitem>
          <para>Repeat steps 1-3 in this task:</para>
        </listitem>
        <listitem>
          <para>Start the curses version of yast to configure networking<?asciidoc-br?><literal><emphasis role="strong"><phrase role="blue">yast2 lan</phrase></emphasis></literal></para>
        </listitem>
        <listitem>
          <para>Use the <emphasis role="strong">F4 key</emphasis> on your keyboard to edit:<?asciidoc-br?></para>
          <note>
            <para>You can use the tab key to navigate the screen</para>
          </note>
        </listitem>
        <listitem>
          <para>Click <emphasis role="strong">alt t</emphasis> on your keyboard to change to Statically Assigned IP Address</para>
        </listitem>
        <listitem>
          <para>In the IP Address field, enter:<?asciidoc-br?><literal><emphasis role="strong"><phrase role="green">10.0.2.10</phrase></emphasis></literal><?asciidoc-br?>
 Use the tab key to go to the next field</para>
        </listitem>
        <listitem>
          <para>In the Subnet Mask field, enter:<?asciidoc-br?><literal><emphasis role="strong"><phrase role="green">/24</phrase></emphasis></literal></para>
        </listitem>
        <listitem>
          <para>Use the <emphasis role="strong">F10 key</emphasis> on your keyboard to go to the next screen</para>
        </listitem>
        <listitem>
          <para>Click <emphasis role="strong">alt s</emphasis> on your keyboard to change the Hostname/DNS</para>
        </listitem>
        <listitem>
          <para>In the hostname field, enter: <emphasis role="strong">clone-master</emphasis><?asciidoc-br?>
Use the <emphasis role="strong">tab key</emphasis> to go to the <emphasis role="strong"><phrase role="gray">Name Server 1</phrase></emphasis> field</para>
        </listitem>
        <listitem>
          <para>Enter the generic Google DNS or substitute another if you prefer:<?asciidoc-br?><literal><emphasis role="strong"><phrase role="green">8.8.8.8</phrase></emphasis></literal></para>
        </listitem>
        <listitem>
          <para>Click <emphasis role="strong">alt u</emphasis> on your keyboard to change the Routing</para>
        </listitem>
        <listitem>
          <para>In the <emphasis role="strong"><phrase role="gray">Default IPv4 Gateway</phrase></emphasis> field, enter:<?asciidoc-br?><literal><emphasis role="strong"><phrase role="green">10.0.2.2</phrase></emphasis></literal></para>
        </listitem>
        <listitem>
          <para>Select click <emphasis role="strong">alt i</emphasis> on your keyboard to select Enable IPv4 Forwarding</para>
        </listitem>
        <listitem>
          <para>Use the <emphasis role="strong">F10 key</emphasis> to finish.</para>
        </listitem>
        <listitem>
          <para>Ping the gateway. If you get a positive response, then you have set up the network correctly:<?asciidoc-br?><literal><emphasis role="strong"><phrase role="blue">ping 10.0.2.2</phrase></emphasis></literal></para>
        </listitem>
        <listitem>
          <para>Ping an internet website.  If you get a positive response, then you have set up the DNS correctly:<?asciidoc-br?><literal><emphasis role="strong"><phrase role="blue">ping opensuse.org</phrase></emphasis></literal></para>
        </listitem>
        <listitem>
          <para>If either step 19 or 20 gives an error, review the steps in this task.</para>
        </listitem>
        <listitem>
          <para>Shut down the VM:<?asciidoc-br?><literal><emphasis role="strong"><phrase role="blue">halt -p</phrase></emphasis></literal></para>
        </listitem>
      </orderedlist>
      <informaltable frame="all" rowsep="1" colsep="1">
        <tgroup cols="1">
          <colspec colname="col_1" colwidth="100*"/>
          <tbody>
            <row>
              <entry align="left" valign="top">
                <para>Description:
In this section you set up a new Kubic VM which will be used as a template for creating further VMs.</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
      <para>
        <?asciidoc-pagebreak?>
      </para>
    </section>
  </chapter>
  <chapter xml:id="_section_2_clone_the_vms">
    <title>Section 2: Clone the VMs</title>
    <informaltable frame="all" rowsep="1" colsep="1">
      <tgroup cols="1">
        <colspec colname="col_1" colwidth="100*"/>
        <tbody>
          <row>
            <entry align="left" valign="top">
              <para role="lead">Description:</para>
              <para>In this section you will create VMs for your Kubic cluster.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <section xml:id="_task_1_create_the_kubic_master_node">
      <title>Task 1: Create the Kubic Master Node</title>
      <orderedlist numeration="arabic">
        <listitem>
          <para>Right-click on the <emphasis role="strong"><phrase role="gray">Kubic-CloneMaster</phrase></emphasis> VM and choose <emphasis role="strong">Clone</emphasis></para>
        </listitem>
        <listitem>
          <para>In the <emphasis role="strong"><phrase role="gray">Name</phrase></emphasis> field, enter:<?asciidoc-br?><emphasis role="strong">Kubic-Master</emphasis></para>
        </listitem>
        <listitem>
          <para>In the <emphasis role="strong"><phrase role="gray">Mac Address Policy</phrase></emphasis> field, choose:<?asciidoc-br?><emphasis role="strong">Generate new MAC addresses for all network adapters</emphasis></para>
        </listitem>
        <listitem>
          <para>On the <emphasis role="strong"><phrase role="gray">Clone type</phrase></emphasis> screen, choose <emphasis role="strong">Linked Clone</emphasis><?asciidoc-br?>
Click <emphasis role="strong">Clone</emphasis></para>
        </listitem>
      </orderedlist>
    </section>
    <section xml:id="_task_2_create_a_kubic_worker_node">
      <title>Task 2: Create a Kubic Worker Node</title>
      <orderedlist numeration="arabic">
        <listitem>
          <para>Right-click on the <emphasis role="strong"><phrase role="gray">Kubic-CloneMaster</phrase></emphasis> VM and choose <emphasis role="strong">Clone</emphasis></para>
        </listitem>
        <listitem>
          <para>In the <emphasis role="strong"><phrase role="gray">Name</phrase></emphasis> field, enter:<?asciidoc-br?><emphasis role="strong">Kubic-Worker1</emphasis></para>
        </listitem>
        <listitem>
          <para>In the <emphasis role="strong"><phrase role="gray">Mac Address Policy</phrase></emphasis> field, choose:<?asciidoc-br?><emphasis role="strong">Generate new MAC addresses for all network adapters</emphasis></para>
        </listitem>
        <listitem>
          <para>On the <emphasis role="strong"><phrase role="gray">Clone type</phrase></emphasis> screen, choose <emphasis role="strong">Linked Clone</emphasis><?asciidoc-br?>
Click <emphasis role="strong">Clone</emphasis></para>
        </listitem>
        <listitem>
          <para>Repeat this task once more and create <emphasis role="strong">Kubic_Worker2</emphasis>. You may
repeat as many times as you like as long as you have memory and disk
space for each node.</para>
        </listitem>
      </orderedlist>
      <note>
        <para>The <emphasis role="strong">Kubic-CloneMaster</emphasis> VM can be deleted at this point if you don’t think
you will need more nodes or it can be left as a template. If it is
deleted, it can always be recreated using the steps in the previous
section.</para>
      </note>
      <informaltable frame="all" rowsep="1" colsep="1">
        <tgroup cols="1">
          <colspec colname="col_1" colwidth="100*"/>
          <tbody>
            <row>
              <entry align="left" valign="top">
                <para>Summary:</para>
                <para>In this section you created additional VMs that will be used as Master
and Worker nodes in an openUSE Kubic Kubernetes cluster.</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
      <para>
        <?asciidoc-pagebreak?>
      </para>
    </section>
  </chapter>
  <chapter xml:id="_section_3_configure_the_master_and_worker_vms">
    <title>Section 3: Configure the Master and Worker VMs</title>
    <informaltable frame="all" rowsep="1" colsep="1">
      <tgroup cols="1">
        <colspec colname="col_1" colwidth="100*"/>
        <tbody>
          <row>
            <entry align="left" valign="top">
              <para role="lead">Description:</para>
              <para>In this section, you will change the IP addresses on the Master and
Worker VMs to be unique.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <section xml:id="_task_1_configure_the_kubic_master_vm">
      <title>Task 1: Configure the Kubic-Master VM</title>
      <orderedlist numeration="arabic">
        <listitem>
          <para>From the main Virtualbox screen, choose the <emphasis role="strong">Kubic-Master</emphasis> VM and
click on the down arrow next to the start icon. Click on Detachable
Start</para>
        </listitem>
        <listitem>
          <para>Log into the command line:</para>
          <para>
            <emphasis role="strong">
              <phrase role="gray">Userid:</phrase>
            </emphasis>
            <emphasis role="strong">root</emphasis>
          </para>
          <para>
            <emphasis role="strong">
              <phrase role="gray">Password:</phrase>
            </emphasis>
            <emphasis role="strong">[your root password]</emphasis>
          </para>
        </listitem>
        <listitem>
          <para>Start the curses version of yast to configure networking</para>
          <para>
            <literal>
              <emphasis role="strong">
                <phrase role="blue">yast2 lan</phrase>
              </emphasis>
            </literal>
          </para>
        </listitem>
        <listitem>
          <para>Use the <emphasis role="strong">F4</emphasis> key on your keyboard to edit</para>
        </listitem>
        <listitem>
          <para>Use the <emphasis role="strong">tab</emphasis> key to navigate around the screen</para>
        </listitem>
        <listitem>
          <para>Change the IP address to <literal><emphasis role="strong"><phrase role="green">10.0.2.11</phrase></emphasis></literal></para>
        </listitem>
        <listitem>
          <para>Change the Hostname to <emphasis role="strong">kubic-master</emphasis></para>
        </listitem>
        <listitem>
          <para>Use the <emphasis role="strong">F10</emphasis> key to go the next screen</para>
        </listitem>
        <listitem>
          <para>User the <emphasis role="strong">alt s </emphasis>keys to go to the Hostname/DNS screen</para>
        </listitem>
        <listitem>
          <para>Change the Hostname to <emphasis role="strong">kubic-master</emphasis></para>
        </listitem>
        <listitem>
          <para>Use the <emphasis role="strong">F10</emphasis> key to finish:</para>
        </listitem>
      </orderedlist>
    </section>
    <section xml:id="_task_2_configure_the_kubic_worker1_vm">
      <title>Task 2: Configure the Kubic-Worker1 VM</title>
      <orderedlist numeration="arabic">
        <listitem>
          <para>From the main Virtualbox screen, choose the <emphasis role="strong">Kubic-Worker1</emphasis> VM and
click on the down arrow next to the start icon. Click on Detachable
Start</para>
        </listitem>
        <listitem>
          <para>Log into the command line:</para>
          <para>
            <emphasis role="strong">
              <phrase role="gray">Userid:</phrase>
            </emphasis>
            <emphasis role="strong">root</emphasis>
          </para>
          <para>
            <emphasis role="strong">
              <phrase role="gray">Password:</phrase>
            </emphasis>
            <emphasis role="strong">[your root password]</emphasis>
          </para>
        </listitem>
        <listitem>
          <para>Start the curses version of yast to configure networking</para>
          <para>
            <literal>
              <emphasis role="strong">
                <phrase role="blue">yast2 lan</phrase>
              </emphasis>
            </literal>
          </para>
        </listitem>
        <listitem>
          <para>Use the <emphasis role="strong">F4</emphasis> key on your keyboard to edit</para>
        </listitem>
        <listitem>
          <para>Use the <emphasis role="strong">tab</emphasis> key to navigate around the screen</para>
        </listitem>
        <listitem>
          <para>Change the IP address to <literal><emphasis role="strong"><phrase role="green">10.0.2.12</phrase></emphasis></literal></para>
        </listitem>
        <listitem>
          <para>Change the Hostname to <emphasis role="strong">kubic-worker1</emphasis></para>
        </listitem>
        <listitem>
          <para>Use the <emphasis role="strong">F10</emphasis> key to go the next screen</para>
        </listitem>
        <listitem>
          <para>User the <emphasis role="strong">alt s </emphasis>keys to go to the Hostname/DNS screen</para>
        </listitem>
        <listitem>
          <para>Change the Hostname to <emphasis role="strong">kubic-worker1</emphasis></para>
        </listitem>
        <listitem>
          <para>Use the <emphasis role="strong">F10</emphasis> key to finish</para>
          <para>Repeat Task 2 for each worker node. Add 1 to the IP address and hostname
for each node that you configure using the pattern in this section.</para>
          <para>All nodes should be able to ping <literal><emphasis role="strong"><phrase role="green">10.0.2.2</phrase></emphasis></literal>, each other, and an internet
website.</para>
        </listitem>
      </orderedlist>
      <informaltable frame="all" rowsep="1" colsep="1">
        <tgroup cols="1">
          <colspec colname="col_1" colwidth="100*"/>
          <tbody>
            <row>
              <entry align="left" valign="top">
                <para>Summary:</para>
                <para>In this section you changed the IP addresses on each node to be unique
so they are ready to create a Kubernetes cluster</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
      <para>
        <?asciidoc-pagebreak?>
      </para>
    </section>
  </chapter>
  <chapter xml:id="_section_4_bootstrap_the_cluster">
    <title>Section 4: Bootstrap the Cluster</title>
    <informaltable frame="all" rowsep="1" colsep="1">
      <tgroup cols="1">
        <colspec colname="col_1" colwidth="100*"/>
        <tbody>
          <row>
            <entry align="left" valign="top">
              <para role="lead">Description:</para>
              <para>In this section you will bootstrap your Kubic Kubernetes cluster</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <section xml:id="_task_1_set_up_kubic_master">
      <title>Task 1: Set up Kubic-Master</title>
      <orderedlist numeration="arabic">
        <listitem>
          <para>Login into the <emphasis role="strong">Kubic-Master</emphasis> VM if you have not already done so:</para>
          <para><emphasis>Userid:</emphasis><emphasis role="strong">root</emphasis><?asciidoc-br?>
 <?asciidoc-br?><emphasis>Password:</emphasis><emphasis role="strong">[your root password]</emphasis></para>
        </listitem>
        <listitem>
          <para>Run the following command to configure this as a Kubernetes master
node:</para>
          <screen>kubeadm init --cri-socket=/var/run/crio/crio.sock \
--pod-network-cidr=10.244.0.0/16</screen>
          <para>You should see some output and at the end, you will see this:</para>
          <para>You can now join any number of machines by running the following on each
node as root:</para>
          <screen>kubeadm join 10.0.2.11:6443 --token …*</screen>
          <important>
            <para>Save this command. You will need it later!</para>
          </important>
        </listitem>
      </orderedlist>
    </section>
    <section xml:id="_task_2_optional_add_a_second_network_interface_to_kubic_master_vm">
      <title>Task 2: (optional) Add a second network interface to Kubic-Master VM</title>
      <orderedlist numeration="arabic">
        <listitem>
          <para>Power off the Kubic-Master VM</para>
          <screen>halt -p</screen>
        </listitem>
        <listitem>
          <para>From the main Virtualbox screen, choose the <emphasis role="strong">Kubic-Master VM</emphasis> and
click on Settings</para>
        </listitem>
        <listitem>
          <para>Click on the Network icon</para>
        </listitem>
        <listitem>
          <para>Click on the Adaptor 2 tab</para>
          <para>Change Attached to to Bridged Adaptor</para>
          <para>Name should automatically change to whatever physical network adaptor
you are using.</para>
        </listitem>
        <listitem>
          <para>From the main Virtualbox screen, choose the <emphasis role="strong">Kubic-Master</emphasis> VM and
click on the down arrow next to the start icon. Click on Detachable
Start</para>
        </listitem>
        <listitem>
          <para>Log into the command line:</para>
          <para>Userid: <emphasis role="strong">root</emphasis></para>
          <para>Password: <emphasis role="strong">[your root password]</emphasis></para>
        </listitem>
        <listitem>
          <para>Start the curses version of yast to configure networking on the new
nic</para>
          <screen>yast2 lan</screen>
        </listitem>
        <listitem>
          <para>Use the <emphasis role="strong">F4</emphasis> key on your keyboard to edit the new nic</para>
        </listitem>
        <listitem>
          <para>Click on <emphasis role="strong">alt y</emphasis> on your keyboard to change this nic to DHCP. If
your network does not have DHCP, set a static IP instead.</para>
        </listitem>
        <listitem>
          <para>Click on <emphasis role="strong">F10</emphasis> on your keyboard to exit this screen</para>
        </listitem>
        <listitem>
          <para>Click on <emphasis role="strong">F10</emphasis> on your keyboard to exit yast</para>
        </listitem>
        <listitem>
          <para>Find your new IP addresses</para>
          <screen>ip a</screen>
          <para>You should now be able to log into the Kubic-Master using the terminal
or application of your choice. You can also now copy and paste from this
book.</para>
        </listitem>
      </orderedlist>
    </section>
    <section xml:id="_task_3_set_up_the_kubic_workers">
      <title>Task 3: Set up the Kubic-Workers</title>
      <orderedlist numeration="arabic">
        <listitem>
          <para>Login to the Kubic-Worker1 VM if you have not already done so:</para>
          <para>
            <emphasis>Userid:</emphasis>
            <emphasis role="strong">root</emphasis>
            <?asciidoc-br?>
            <emphasis>Password:</emphasis>
            <emphasis role="strong">[your root password]</emphasis>
          </para>
        </listitem>
        <listitem>
          <para>Run the output command from Task 1 and add to the end of the command:</para>
          <screen>--cri-socket=/var/run/crio/crio.sock</screen>
        </listitem>
        <listitem>
          <para>Repeat this task for every worker VM</para>
        </listitem>
      </orderedlist>
    </section>
    <section xml:id="_task_4_set_up_the_kubectl">
      <title>Task 4: Set up the kubectl</title>
      <orderedlist numeration="arabic">
        <listitem>
          <para>On the <emphasis role="strong">Kubic-Master</emphasis> VM, copy and set up the config file so that
kubectl can interact with the cluster:</para>
          <screen>mkdir -p $HOME/.kube
sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
sudo chown $(id -u):$(id -g) $HOME/.kube/config</screen>
        </listitem>
        <listitem>
          <para>Check on your nodes</para>
          <screen>kubectl get nodes</screen>
          <para>You should have 3 nodes. All of them should be in a NotReady status</para>
        </listitem>
      </orderedlist>
    </section>
    <section xml:id="_task_5_set_up_flannel">
      <title>Task 5: Set up Flannel</title>
      <orderedlist numeration="arabic">
        <listitem>
          <para>Run the following command to install flannel on your cluster:</para>
          <screen>kubectl apply -f https://0y.at/kubicflannel</screen>
        </listitem>
        <listitem>
          <para>Check on your nodes</para>
          <screen>watch kubectl get nodes</screen>
          <para>In 1-2 minutes all of them should be in a Ready status. Click on <emphasis role="strong">Ctrl
c</emphasis> on your keyboard to exit this screen.</para>
          <para>You now have a fully functional Kubernetes cluster! You can add more
worker nodes at any time and then bootstrap them in like you did above.</para>
        </listitem>
      </orderedlist>
      <informaltable frame="all" rowsep="1" colsep="1">
        <tgroup cols="1">
          <colspec colname="col_1" colwidth="100*"/>
          <tbody>
            <row>
              <entry align="left" valign="top">
                <para>Summary:</para>
                <para>In this section you completed your Kubic Kubernetes cluster. It is now
fully functional and ready to be used.</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
      <para>
        <?asciidoc-pagebreak?>
      </para>
    </section>
  </chapter>
  <chapter xml:id="_license">
    <title>License</title>
    <para>This work is licensed under a <link xl:href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License.</link></para>
    <para>You are free to:</para>
    <para><emphasis role="strong">Share</emphasis> — copy and redistribute the material in any medium or format</para>
    <para><emphasis role="strong">Adapt</emphasis> — remix, transform, and build upon the material for any purpose, even commercially.</para>
    <para>This license is acceptable for Free Cultural Works.</para>
    <para>The licensor cannot revoke these freedoms as long as you follow the license terms.
Under the following terms:</para>
    <para><emphasis role="strong">Attribution</emphasis> — You must give appropriate credit, provide a link to the license, and indicate if changes were made. You may do so in any reasonable manner, but not in any way that suggests the licensor endorses you or your use.</para>
    <para><emphasis role="strong">ShareAlike</emphasis> — If you remix, transform, or build upon the material, you must distribute your contributions under the same license as the original.</para>
    <para><emphasis role="strong">No additional restrictions</emphasis> — You may not apply legal terms or technological measures that legally restrict others from doing anything the license permits.</para>
    <para>
      <emphasis role="strong">Notices:</emphasis>
    </para>
    <para>You do not have to comply with the license for elements of the material in the public domain or where your use is permitted by an applicable exception or limitation.
No warranties are given. The license may not give you all of the permissions necessary for your intended use. For example, other rights such as publicity, privacy, or moral rights may limit how you use the material.</para>
  </chapter>
</book>
